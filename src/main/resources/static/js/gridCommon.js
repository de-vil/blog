if(void 0===gridViewModel)var gridViewModel=function(e){var t=this,o=e.tableId,r=o.substr(1),a=800,l=520,n=e.recordId;e.recordId&&(n=e.recordId);var i=e.dlgID,d=e.formId,s=15;e.pageSize&&(s=e.pageSize),e.autoWidth&&(a=.85*top.document.body.clientWidth,l=.8*top.document.body.clientHeight),t.init=function(){t.loadTable(),null==top.tabArr&&(top.tabArr={}),top.tabArr[r]=t,$(d).validate()},t.batchRemove=function(){var r=$(o).bootstrapTable("getSelections");0!=r.length?top.layer.confirm("确认要删除选中的'"+r.length+"'条数据吗?",{btn:["确定","取消"]},function(o){top.layer.close(o);var a=new Array;$.each(r,function(e,t){a[e]=t[n]}),$.ajax({type:"POST",data:{ids:a},url:e.deleteURL(),success:function(e){e.code,layer.msg(e.msg),t.reLoadTable()}})},function(){}):layer.msg("请选择要删除的数据")},t.clearModel=function(){$(":input",e.formId).not(":button,:reset,:checkbox,:radio").val(""),$(e.formId).iCheck&&$(":input",e.formId).iCheck("uncheck"),$(":input",e.formId).prop("checked",!1).remove("selected")},t.showAddModel=function(o){$("#hidId").val(0),t.clearModel(),e.showAddBefore&&e.showAddBefore(),$(i).modal("show")},t.showAddModel=function(o){$("#hidId").val(0),null==e.AddDlgTitle&&(e.AddDlgTitle="新增记录"),t.showPopLayer(0,e.AddDlgTitle,o)},t.showUpdateModel=function(o,r){null==e.updateDlgTitle&&(e.updateDlgTitle="编辑记录"),t.showPopLayer(o,e.updateDlgTitle,r)},t.showPopLayer=function(t,o,n){var i=e.ctrfix+"/edit?id="+t+" &tag="+r;void 0!==n&&(i+="&"+n),top.layer.open({type:2,title:o,maxmin:!0,shadeClose:!1,area:[a+"px",l+"px"],content:i})},t.reLoadTable=function(){$(o).bootstrapTable("refresh")},t.loadTable=function(){for(var t=$(":input",e.srForm).not(":button, :submit, :reset"),r=t.length,a=new Object,l=0;l<r;l++){var n=(f=t[l]).name;if(!(n.indexOf("sr")<0)){n=n.substring(2);var i=$(f).val();if(null!=i&&""!=i){var d=$(f).attr("data-between");if(null==d||""==d){var c=$(f).attr("data-opera");null!=c&&""!=c&&(i+="^:"+c),a[n]=i}else{var u=a[d];u+="^^"+i,a[d]=u}}}}var p="";for(var f in a)p+="&"+f+"="+a[f];""!=p&&(p=p.substring(1),p=encodeURI(p)),$(o).bootstrapTable("destroy"),$(o).bootstrapTable({method:"GET",url:e.listURL(),iconSize:"outline",toolbar:"#exampleToolbar",striped:!0,dataType:"json",pagination:!0,sortable:!0,singleSelect:!1,pageSize:s,pageNumber:1,sidePagination:"server",queryParams:function(t){var o=t.sort,r=t.order;null==o&&(o=e.sort,r=e.direct);var a={pageSize:t.limit,pageIndex:t.offset,sort:o,direct:r,where:p};return e.listParamsBefore&&e.listParamsBefore(a),a},columns:e.columns})},t.exportExcel=function(t){document.location.href=e.outExcel()}};